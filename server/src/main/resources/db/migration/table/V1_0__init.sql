CREATE TABLE IF NOT EXISTS recipe (uid uuid PRIMARY KEY, create_at TIMESTAMP NOT NULL, update_at TIMESTAMP NULL, delete_at TIMESTAMP NULL, title TEXT NOT NULL, description TEXT NOT NULL, cooking_time INT DEFAULT 0 NOT NULL);
CREATE TABLE IF NOT EXISTS ingredient (uid uuid PRIMARY KEY, create_at TIMESTAMP NOT NULL, update_at TIMESTAMP NULL, delete_at TIMESTAMP NULL, title TEXT NOT NULL, description TEXT NULL, "type" TEXT NULL);
CREATE TABLE IF NOT EXISTS step (uid uuid PRIMARY KEY, create_at TIMESTAMP NOT NULL, update_at TIMESTAMP NULL, delete_at TIMESTAMP NULL, "position" INT NOT NULL, description TEXT NOT NULL, enabled BOOLEAN DEFAULT true NOT NULL, prep_time INT DEFAULT 0 NOT NULL, recipe uuid NOT NULL, CONSTRAINT fk_step_recipe_uid FOREIGN KEY (recipe) REFERENCES recipe(uid) ON DELETE RESTRICT ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS recipeingredient (recipe uuid, ingredient uuid, CONSTRAINT pk_RecipeIngredient PRIMARY KEY (recipe, ingredient), CONSTRAINT fk_recipeingredient_recipe_uid FOREIGN KEY (recipe) REFERENCES recipe(uid) ON DELETE RESTRICT ON UPDATE RESTRICT, CONSTRAINT fk_recipeingredient_ingredient_uid FOREIGN KEY (ingredient) REFERENCES ingredient(uid) ON DELETE RESTRICT ON UPDATE RESTRICT);
